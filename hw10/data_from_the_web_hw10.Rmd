---
title: "Data from the Web"
author: "Santiago David"
date: '2017-12-07'
output: github_document
---

Since we already practiced with Web scraping and using API queries in class, I decided that for this homeworkd I will use an R package that wraps an API from the rOpenSci in order to get data from the web.

`reBird` is a package that interface with the [eBird](http://ebird.org/content/ebird/) website, which is a real-time, online bird checklist program that allows birders to record the birds they see, keep track of their lists and at the same time, contribute to science and conservation. Click [here](https://github.com/ropensci/rebird) for more info

`rplos` on the other side, is a package for accessing full text articles from the Public Library of Science journals using their API. Click [here](https://github.com/ropensci/rplos) for more info.

### **Main objectives**: 
The general objective is to combine information from these two rOpenSci packages to explore how many articles have been published on a bird species. I will do these for all the bird species recorded on eBird for the UBC campus.

Specifically, I did the following:
1 - Download data from the internet from two sources
2 - Read, Join, Filter and Clean the data for Analysis and Graphics
3 - Analyze the combined dataset in different ways to produce some summary graphs
4 - Render this R Markdown document without using RStudio's buttons.

### **Process**

**First**, we need to install and load both packages
```{r}
install.packages("rebird")
install.packages("rplos")
suppressPackageStartupMessages(library(rebird))
suppressPackageStartupMessages(library(rplos))
suppressPackageStartupMessages(library(tidyverse))
suppressPackageStartupMessages(library(knitr))
```

**rebird data**
There are several ways to extract information from **eBird** using rebird, for example, you can search bird species for a "region", using short codes that refers to political units, for example a country, lets explore the number of birds recorded for CANADA = CAN

```{r}
canadianbirds <- ebirdregion("CA")
canadianbirds %>% 
  head() %>% 
  knitr::kable()
```

We can see that `rebird` gives us a lot of information such as scientific name, common name, locality, coordinates... But, the amount of birds in Canada is probably too much for this exercise..., let's narrow it down to birds in UBC campus

For this, we can extract information for a particular geographic location by using `rebird` function `ebirdhotspot()`, which uses categories assigned in `ebird` for particular areas

If we search for birds in [UBC campus](http://ebird.org/ebird/hotspot/L344557) on the website, we will observe something like this:

![](ebird_screenshot.png)
But, we want to get that list on R..., so we can use the code for Vancouver-UBC which is "L344557". (Note: The maximum number of days back allowed to look for observations is 30)

```{r}
ubcbirds <- ebirdhotspot(locID = "L344557", back = 30) 

glimpse(ubcbirds)

ubcbirds %>%
  head() %>%
  kable()
```

Apparently, in the last month, there have been only 19 species of birds recorded at UBC campus (or at least 19 submitted to ebird), we know there are way more birds on campus, but it's okay... We can work with this list and explore how many articles have been published about these species of birds. 

But **before** moving to the second part, we should tidy this list first, right?, lets make sure scientific names are correct (i.e. binomial) and unique for each secies and select only the variables of interest...

```{r}
ubcbirds$sciName
```

The first two names on this list are dubious

Using `rebird` 



```{r}
ebirdgeo(species = 'hypopyrrhus pyrohypogaster', lat = 4, lng = -74)
```

